import{q as V,u as S,r as g,s as C,w as j,a as x,o as _,d as e,t as o,e as t,b as i,v as u,J as f,f as q,m as E}from"./index-B5S0Oh91.js";const N={class:"mx-auto max-w-3xl space-y-6"},P={class:"space-y-3"},z={class:"text-2xl font-bold"},R={class:"text-sm text-slate-500"},A={key:0,class:"grid gap-6 md:grid-cols-2"},B={class:"text-lg font-semibold"},D=["placeholder"],J={class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},M={class:"text-lg font-semibold"},L=["placeholder"],T=["placeholder"],F=["placeholder"],I={class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},O={key:1,class:"space-y-6"},G={class:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900"},H={class:"flex items-center gap-4"},K=["src"],Q={class:"text-xl font-semibold"},W={class:"text-sm text-slate-500"},X={class:"text-lg font-semibold"},Y={class:"grid gap-4 md:grid-cols-2"},Z=["placeholder"],$=["placeholder"],ee=["placeholder"],te={value:"zh-CN"},se={value:"en-US"},ae={value:"ja-JP"},re=["placeholder"],le={class:"flex flex-col gap-2 text-sm"},oe={class:"rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},de="https://avatars.githubusercontent.com/u/000?v=4",ue={__name:"UserCenterView",setup(ne){const n=V(),{t:s}=S(),h=g(""),c=g(""),p=g(""),b=g(""),l=C({name:"",bio:"",headline:"",location:"",language:"zh-CN",avatar:""});j(()=>n.user,d=>{d&&(Object.assign(l,d),l.language==="en"&&(l.language="en-US"),l.language==="ja"&&(l.language="ja-JP"),l.language||(l.language="zh-CN"))},{immediate:!0});const w=async()=>{try{await n.login(h.value)}catch(d){window.alert((d==null?void 0:d.message)??s("user.alerts.loginError"))}},k=async()=>{if(!p.value){window.alert(s("user.alerts.passwordRequired"));return}try{await n.register({email:c.value,name:b.value,password:p.value}),b.value="",c.value="",p.value=""}catch(d){window.alert((d==null?void 0:d.message)??s("user.alerts.registerError"))}},y=()=>{n.updateProfile(l),window.alert(s("user.alerts.profileUpdated"))},U=async d=>{var v;const a=d.target,r=(v=a==null?void 0:a.files)==null?void 0:v[0];if(!r)return;const m=new FileReader;m.onload=()=>{l.avatar=m.result},m.readAsDataURL(r)};return(d,a)=>(_(),x("section",N,[e("header",P,[e("h1",z,o(t(s)("user.title")),1),e("p",R,o(t(s)("user.description")),1)]),t(n).user?(_(),x("div",O,[e("div",G,[e("header",H,[e("img",{src:t(n).user.avatar||de,alt:"",class:"h-16 w-16 rounded-full object-cover"},null,8,K),e("div",null,[e("h2",Q,o(t(n).user.name),1),e("p",W,o(t(n).user.headline||t(s)("user.placeholders.intro")),1)])]),e("button",{class:"mt-4 rounded border border-slate-200 px-3 py-2 text-sm hover:border-brand dark:border-slate-700",onClick:a[4]||(a[4]=(...r)=>t(n).logout&&t(n).logout(...r))},o(t(s)("user.logout")),1)]),e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:f(y,["prevent"])},[e("h3",X,o(t(s)("user.profileEdit")),1),e("div",Y,[i(e("input",{"onUpdate:modelValue":a[5]||(a[5]=r=>l.name=r),type:"text",placeholder:t(s)("user.placeholders.name"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,Z),[[u,l.name]]),i(e("input",{"onUpdate:modelValue":a[6]||(a[6]=r=>l.headline=r),type:"text",placeholder:t(s)("user.placeholders.headline"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,$),[[u,l.headline]]),i(e("input",{"onUpdate:modelValue":a[7]||(a[7]=r=>l.location=r),type:"text",placeholder:t(s)("user.placeholders.location"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,ee),[[u,l.location]]),i(e("select",{"onUpdate:modelValue":a[8]||(a[8]=r=>l.language=r),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[e("option",te,o(t(s)("language.zh")),1),e("option",se,o(t(s)("language.en")),1),e("option",ae,o(t(s)("language.ja")),1)],512),[[q,l.language]])]),i(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=r=>l.bio=r),rows:"4",placeholder:t(s)("user.placeholders.bio"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,re),[[u,l.bio]]),e("label",le,[E(o(t(s)("user.placeholders.avatar"))+" ",1),e("input",{type:"file",accept:"image/*",onChange:U},null,32)]),e("button",oe,o(t(s)("user.buttons.updateProfile")),1)],32)])):(_(),x("div",A,[e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:f(w,["prevent"])},[e("h2",B,o(t(s)("user.login")),1),i(e("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>h.value=r),type:"email",required:"",placeholder:t(s)("user.placeholders.email"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,D),[[u,h.value]]),e("button",J,o(t(s)("user.buttons.login")),1)],32),e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:f(k,["prevent"])},[e("h2",M,o(t(s)("user.register")),1),i(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>b.value=r),type:"text",required:"",placeholder:t(s)("user.placeholders.name"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,L),[[u,b.value]]),i(e("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>c.value=r),type:"email",required:"",placeholder:t(s)("user.placeholders.email"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,T),[[u,c.value]]),i(e("input",{"onUpdate:modelValue":a[3]||(a[3]=r=>p.value=r),type:"password",required:"",placeholder:t(s)("user.placeholders.password"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,F),[[u,p.value]]),e("button",I,o(t(s)("user.buttons.register")),1)],32)]))]))}};export{ue as default};
