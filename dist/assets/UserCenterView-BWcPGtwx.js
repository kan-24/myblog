import{u as U,r as m,s as V,w as S,a as g,o as x,d as t,A as n,b as o,v as d,G as c,t as v,e as C,l as N}from"./index-pPjq6uOp.js";const A={class:"mx-auto max-w-3xl space-y-6"},E={key:0,class:"grid gap-6 md:grid-cols-2"},q={key:1,class:"space-y-6"},B={class:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900"},D={class:"flex items-center gap-4"},L=["src"],M={class:"text-xl font-semibold"},R={class:"text-sm text-slate-500"},j={class:"grid gap-4 md:grid-cols-2"},z={class:"flex flex-col gap-2 text-sm"},P="https://avatars.githubusercontent.com/u/000?v=4",G={__name:"UserCenterView",setup(T){const r=U(),i=m(""),u=m(""),b=m(""),a=V({name:"",bio:"",headline:"",location:"",language:"zh-CN",avatar:""});S(()=>r.user,l=>{l&&Object.assign(a,l)},{immediate:!0});const k=async()=>{try{await r.login(i.value)}catch(l){window.alert((l==null?void 0:l.message)??"登录失败")}},y=async()=>{try{await r.register({email:u.value,name:b.value})}catch(l){window.alert((l==null?void 0:l.message)??"注册失败")}},w=()=>{r.updateProfile(a),window.alert("资料已更新（LocalStorage）")},h=async l=>{var f;const e=l.target,s=(f=e==null?void 0:e.files)==null?void 0:f[0];if(!s)return;const p=new FileReader;p.onload=()=>{a.avatar=p.result},p.readAsDataURL(s)};return(l,e)=>(x(),g("section",A,[e[17]||(e[17]=t("header",{class:"space-y-3"},[t("h1",{class:"text-2xl font-bold"},"个人中心"),t("p",{class:"text-sm text-slate-500"},"管理登录、注册与资料信息。")],-1)),n(r).user?(x(),g("div",q,[t("div",B,[t("header",D,[t("img",{src:n(r).user.avatar||P,alt:"",class:"h-16 w-16 rounded-full object-cover"},null,8,L),t("div",null,[t("h2",M,v(n(r).user.name),1),t("p",R,v(n(r).user.headline||"添加一句话介绍自己"),1)])]),t("button",{class:"mt-4 rounded border border-slate-200 px-3 py-2 text-sm hover:border-brand dark:border-slate-700",onClick:e[3]||(e[3]=(...s)=>n(r).logout&&n(r).logout(...s))}," 退出登录 ")]),t("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:c(w,["prevent"])},[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"资料编辑",-1)),t("div",j,[o(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.name=s),type:"text",placeholder:"姓名",class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.name]]),o(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.headline=s),type:"text",placeholder:"职位头衔",class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.headline]]),o(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.location=s),type:"text",placeholder:"所在地",class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.location]]),o(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.language=s),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[...e[13]||(e[13]=[t("option",{value:"zh-CN"},"中文",-1),t("option",{value:"en"},"English",-1)])],512),[[C,a.language]])]),o(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>a.bio=s),rows:"4",placeholder:"个人简介",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.bio]]),t("label",z,[e[14]||(e[14]=N(" 头像上传（base64） ",-1)),t("input",{type:"file",accept:"image/*",onChange:h},null,32)]),e[16]||(e[16]=t("button",{class:"rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"}," 更新资料 ",-1))],32)])):(x(),g("div",E,[t("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:c(k,["prevent"])},[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold"},"登录",-1)),o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),type:"email",required:"",placeholder:"邮箱",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,i.value]]),e[10]||(e[10]=t("button",{class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"}," 登录 ",-1))],32),t("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:c(y,["prevent"])},[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold"},"注册",-1)),o(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>b.value=s),type:"text",required:"",placeholder:"姓名",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,b.value]]),o(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>u.value=s),type:"email",required:"",placeholder:"邮箱",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,u.value]]),e[12]||(e[12]=t("button",{class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"}," 注册 ",-1))],32)]))]))}};export{G as default};
