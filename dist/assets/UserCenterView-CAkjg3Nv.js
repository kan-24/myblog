import{q as U,u as V,r as h,s as S,w as j,a as m,o as x,d as e,t as l,e as t,b as i,v as u,G as _,f as C,m as E}from"./index-BLJpVeXD.js";const N={class:"mx-auto max-w-3xl space-y-6"},P={class:"space-y-3"},q={class:"text-2xl font-bold"},z={class:"text-sm text-slate-500"},A={key:0,class:"grid gap-6 md:grid-cols-2"},B={class:"text-lg font-semibold"},D=["placeholder"],M={class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},R={class:"text-lg font-semibold"},J=["placeholder"],L=["placeholder"],T={class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},F={key:1,class:"space-y-6"},G={class:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900"},I={class:"flex items-center gap-4"},O=["src"],H={class:"text-xl font-semibold"},K={class:"text-sm text-slate-500"},Q={class:"text-lg font-semibold"},W={class:"grid gap-4 md:grid-cols-2"},X=["placeholder"],Y=["placeholder"],Z=["placeholder"],$={value:"zh-CN"},ee={value:"en-US"},te={value:"ja-JP"},se=["placeholder"],ae={class:"flex flex-col gap-2 text-sm"},oe={class:"rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},re="https://avatars.githubusercontent.com/u/000?v=4",ne={__name:"UserCenterView",setup(le){const n=U(),{t:s}=V(),c=h(""),p=h(""),b=h(""),r=S({name:"",bio:"",headline:"",location:"",language:"zh-CN",avatar:""});j(()=>n.user,d=>{d&&(Object.assign(r,d),r.language==="en"&&(r.language="en-US"),r.language==="ja"&&(r.language="ja-JP"))},{immediate:!0});const v=async()=>{try{await n.login(c.value)}catch(d){window.alert((d==null?void 0:d.message)??s("user.alerts.loginError"))}},k=async()=>{try{await n.register({email:p.value,name:b.value})}catch(d){window.alert((d==null?void 0:d.message)??s("user.alerts.registerError"))}},y=()=>{n.updateProfile(r),window.alert(s("user.alerts.profileUpdated"))},w=async d=>{var f;const a=d.target,o=(f=a==null?void 0:a.files)==null?void 0:f[0];if(!o)return;const g=new FileReader;g.onload=()=>{r.avatar=g.result},g.readAsDataURL(o)};return(d,a)=>(x(),m("section",N,[e("header",P,[e("h1",q,l(t(s)("user.title")),1),e("p",z,l(t(s)("user.description")),1)]),t(n).user?(x(),m("div",F,[e("div",G,[e("header",I,[e("img",{src:t(n).user.avatar||re,alt:"",class:"h-16 w-16 rounded-full object-cover"},null,8,O),e("div",null,[e("h2",H,l(t(n).user.name),1),e("p",K,l(t(n).user.headline||t(s)("user.placeholders.intro")),1)])]),e("button",{class:"mt-4 rounded border border-slate-200 px-3 py-2 text-sm hover:border-brand dark:border-slate-700",onClick:a[3]||(a[3]=(...o)=>t(n).logout&&t(n).logout(...o))},l(t(s)("user.logout")),1)]),e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:_(y,["prevent"])},[e("h3",Q,l(t(s)("user.profileEdit")),1),e("div",W,[i(e("input",{"onUpdate:modelValue":a[4]||(a[4]=o=>r.name=o),type:"text",placeholder:t(s)("user.placeholders.name"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,X),[[u,r.name]]),i(e("input",{"onUpdate:modelValue":a[5]||(a[5]=o=>r.headline=o),type:"text",placeholder:t(s)("user.placeholders.headline"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,Y),[[u,r.headline]]),i(e("input",{"onUpdate:modelValue":a[6]||(a[6]=o=>r.location=o),type:"text",placeholder:t(s)("user.placeholders.location"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,Z),[[u,r.location]]),i(e("select",{"onUpdate:modelValue":a[7]||(a[7]=o=>r.language=o),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[e("option",$,l(t(s)("language.zh")),1),e("option",ee,l(t(s)("language.en")),1),e("option",te,l(t(s)("language.ja")),1)],512),[[C,r.language]])]),i(e("textarea",{"onUpdate:modelValue":a[8]||(a[8]=o=>r.bio=o),rows:"4",placeholder:t(s)("user.placeholders.bio"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,se),[[u,r.bio]]),e("label",ae,[E(l(t(s)("user.placeholders.avatar"))+" ",1),e("input",{type:"file",accept:"image/*",onChange:w},null,32)]),e("button",oe,l(t(s)("user.buttons.updateProfile")),1)],32)])):(x(),m("div",A,[e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:_(v,["prevent"])},[e("h2",B,l(t(s)("user.login")),1),i(e("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>c.value=o),type:"email",required:"",placeholder:t(s)("user.placeholders.email"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,D),[[u,c.value]]),e("button",M,l(t(s)("user.buttons.login")),1)],32),e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:_(k,["prevent"])},[e("h2",R,l(t(s)("user.register")),1),i(e("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>b.value=o),type:"text",required:"",placeholder:t(s)("user.placeholders.name"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,J),[[u,b.value]]),i(e("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>p.value=o),type:"email",required:"",placeholder:t(s)("user.placeholders.email"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,L),[[u,p.value]]),e("button",T,l(t(s)("user.buttons.register")),1)],32)]))]))}};export{ne as default};
