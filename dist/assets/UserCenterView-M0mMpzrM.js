import{d as U,u as V,r as m,x as C,w as S,a as g,o as x,e as t,B as n,b as o,v as d,H as c,t as v,f as N,m as B}from"./index-CuV8GAmF.js";const E={class:"mx-auto max-w-3xl space-y-6"},q={key:0,class:"grid gap-6 md:grid-cols-2"},A={key:1,class:"space-y-6"},D={class:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900"},L={class:"flex items-center gap-4"},M=["src"],R={class:"text-xl font-semibold"},j={class:"text-sm text-slate-500"},z={class:"grid gap-4 md:grid-cols-2"},P={class:"flex flex-col gap-2 text-sm"},T="https://avatars.githubusercontent.com/u/000?v=4",O=U({__name:"UserCenterView",setup(F){const s=V(),i=m(""),u=m(""),b=m(""),a=C({name:"",bio:"",headline:"",location:"",language:"zh-CN",avatar:""});S(()=>s.user,l=>{l&&Object.assign(a,l)},{immediate:!0});const k=async()=>{try{await s.login(i.value)}catch(l){window.alert(l.message)}},y=async()=>{try{await s.register({email:u.value,name:b.value})}catch(l){window.alert(l.message)}},w=()=>{s.updateProfile(a),window.alert("资料已更新（LocalStorage）")},h=async l=>{var f;const r=(f=l.target.files)==null?void 0:f[0];if(!r)return;const p=new FileReader;p.onload=()=>{a.avatar=p.result},p.readAsDataURL(r)};return(l,e)=>(x(),g("section",E,[e[17]||(e[17]=t("header",{class:"space-y-3"},[t("h1",{class:"text-2xl font-bold"},"个人中心"),t("p",{class:"text-sm text-slate-500"},"管理登录、注册与资料信息。")],-1)),n(s).user?(x(),g("div",A,[t("div",D,[t("header",L,[t("img",{src:n(s).user.avatar||T,alt:"",class:"h-16 w-16 rounded-full object-cover"},null,8,M),t("div",null,[t("h2",R,v(n(s).user.name),1),t("p",j,v(n(s).user.headline||"添加一句话介绍自己"),1)])]),t("button",{class:"mt-4 rounded border border-slate-200 px-3 py-2 text-sm hover:border-brand dark:border-slate-700",onClick:e[3]||(e[3]=(...r)=>n(s).logout&&n(s).logout(...r))}," 退出登录 ")]),t("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:c(w,["prevent"])},[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"资料编辑",-1)),t("div",z,[o(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>a.name=r),type:"text",placeholder:"姓名",class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.name]]),o(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a.headline=r),type:"text",placeholder:"职位头衔",class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.headline]]),o(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>a.location=r),type:"text",placeholder:"所在地",class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.location]]),o(t("select",{"onUpdate:modelValue":e[7]||(e[7]=r=>a.language=r),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[...e[13]||(e[13]=[t("option",{value:"zh-CN"},"中文",-1),t("option",{value:"en"},"English",-1)])],512),[[N,a.language]])]),o(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=r=>a.bio=r),rows:"4",placeholder:"个人简介",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,a.bio]]),t("label",P,[e[14]||(e[14]=B(" 头像上传（base64） ",-1)),t("input",{type:"file",accept:"image/*",onChange:h},null,32)]),e[16]||(e[16]=t("button",{class:"rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"}," 更新资料 ",-1))],32)])):(x(),g("div",q,[t("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:c(k,["prevent"])},[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold"},"登录",-1)),o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>i.value=r),type:"email",required:"",placeholder:"邮箱",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,i.value]]),e[10]||(e[10]=t("button",{class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"}," 登录 ",-1))],32),t("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:c(y,["prevent"])},[e[11]||(e[11]=t("h2",{class:"text-lg font-semibold"},"注册",-1)),o(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>b.value=r),type:"text",required:"",placeholder:"姓名",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,b.value]]),o(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>u.value=r),type:"email",required:"",placeholder:"邮箱",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,512),[[d,u.value]]),e[12]||(e[12]=t("button",{class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"}," 注册 ",-1))],32)]))]))}});export{O as default};
