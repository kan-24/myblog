import{u as B}from"./posts-DfVChRhQ.js";import{u as F}from"./comments-BPhU_vLp.js";import{u as D,r as h,w as I,c as v,a as i,o as l,b as _,d as e,v as z,e as g,t as r,f as V,F as b,g as y,h as N,i as L,j as U,k as S,l as T,m as j,n as M,p as Y,q as O,s as q,x as H,y as A,z as E}from"./index-BLJpVeXD.js";const G={class:"grid gap-3 md:grid-cols-[1fr_auto_auto_auto]"},J=["placeholder"],K={value:""},Q=["value"],R={value:""},W=["value"],X={__name:"ArticleFilters",props:{categories:{type:Array,default:()=>[]},tags:{type:Array,default:()=>[]}},emits:["change"],setup(n,{emit:u}){const p=n,m=u,{t:c}=D(),a=h(""),s=h(""),d=h(""),f=()=>{m("change",{search:a.value,category:s.value,tag:d.value})};I([a,s,d],f);const w=v(()=>p.categories),k=v(()=>p.tags);return(C,o)=>(l(),i("div",G,[_(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>a.value=t),type:"search",placeholder:g(c)("filters.searchPlaceholder"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm focus:border-brand focus:outline-none dark:border-slate-700 dark:bg-slate-800"},null,8,J),[[z,a.value]]),e("button",{type:"button",class:"rounded border border-brand bg-brand px-3 py-2 text-sm font-medium text-white transition-colors hover:bg-brand-dark",onClick:f},r(g(c)("filters.searchButton")),1),_(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.value=t),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[e("option",K,r(g(c)("filters.allCategories")),1),(l(!0),i(b,null,y(w.value,t=>(l(),i("option",{key:t,value:t},r(t),9,Q))),128))],512),[[V,s.value]]),_(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>d.value=t),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[e("option",R,r(g(c)("filters.allTags")),1),(l(!0),i(b,null,y(k.value,t=>(l(),i("option",{key:t,value:t},"#"+r(t),9,W))),128))],512),[[V,d.value]])]))}},Z={class:"group flex flex-col gap-4 overflow-hidden rounded-2xl border border-slate-200 bg-white/65 shadow transition hover:shadow-lg dark:border-slate-800 dark:bg-slate-900/65 md:flex-row md:items-stretch"},ee={class:"relative overflow-hidden md:max-w-[220px] lg:max-w-[260px]"},te={class:"aspect-[4/3] md:aspect-[3/2]"},se={alt:"",class:"h-full w-full object-cover transition group-hover:scale-105"},oe={class:"flex flex-1 flex-col space-y-2 px-4 pb-4 md:py-4"},ae={class:"flex flex-wrap items-center gap-2 text-xs uppercase tracking-wide text-brand"},re={class:"line-clamp-2 text-sm text-slate-600 dark:text-slate-300 md:line-clamp-3"},le={class:"mt-auto flex flex-wrap items-center justify-between gap-2 text-xs text-slate-500"},ne={class:"flex items-center gap-3"},ce={class:"flex flex-wrap gap-1"},ie={__name:"ArticleCard",props:{post:{type:Object,required:!0}},setup(n){const u=n,p=v(()=>N(u.post.publishedAt).format("YYYY-MM-DD"));return(m,c)=>{const a=L("router-link"),s=U("lazy");return l(),i("article",Z,[e("div",ee,[e("div",te,[_(e("img",se,null,512),[[s,n.post.cover]])])]),e("div",oe,[e("div",ae,[e("span",null,r(n.post.category),1),c[0]||(c[0]=e("span",null,"â€¢",-1)),e("time",null,r(p.value),1)]),S(a,{to:`/posts/${n.post.id}`,class:"text-base font-semibold leading-snug md:text-lg"},{default:T(()=>[j(r(n.post.title),1)]),_:1},8,["to"]),e("p",re,r(n.post.summary),1),e("div",le,[e("div",ne,[e("span",null,"ðŸ‘ï¸ "+r(n.post.views),1),e("span",null,"â¤ï¸ "+r(n.post.likes),1),e("span",null,"â­ "+r(n.post.favorites),1)]),e("div",ce,[(l(!0),i(b,null,y(n.post.tags,d=>(l(),i("span",{key:d,class:"rounded-full bg-slate-100 px-2 py-1 dark:bg-slate-800"}," #"+r(d),1))),128))])])])])}}},de={__name:"IntersectionObserver",emits:["intersect"],setup(n,{emit:u}){const p=u,m=h(null);let c=null;return M(()=>{m.value&&(c=new IntersectionObserver(([a])=>{a.isIntersecting&&p("intersect")}),c.observe(m.value))}),Y(()=>{c&&m.value&&c.unobserve(m.value)}),(a,s)=>(l(),i("div",{ref_key:"target",ref:m,class:"h-1 w-full"},null,512))}},ue={class:"mx-auto flex max-w-6xl flex-col gap-6"},me={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},pe={key:0,class:"space-y-4"},ge={key:1,class:"py-16 text-center text-slate-500"},ve=10,_e={__name:"HomeView",setup(n){const u=B(),p=F(),m=O(),c=v(()=>{var o;return((o=m.user)==null?void 0:o.role)==="admin"}),{t:a}=D(),s=q({search:"",category:"",tag:""}),d=h(1),f=()=>{d.value+=1},w=o=>{s.search=o.search,s.category=o.category,s.tag=o.tag,d.value=1},k=v(()=>{const o=s.search.toLowerCase();return u.posts.filter(t=>{const $=!s.search||t.title.toLowerCase().includes(o)||t.summary.toLowerCase().includes(o),x=!s.category||t.category===s.category,P=!s.tag||t.tags.includes(s.tag);return $&&x&&P})}),C=v(()=>k.value.slice(0,d.value*ve));return M(async()=>{await Promise.all([u.ensureLoaded(),p.ensureLoaded()])}),H(()=>({title:a("home.title"),meta:[{name:"description",content:a("home.description")},{property:"og:title",content:a("home.ogTitle")},{property:"og:description",content:a("home.ogDescription")},{property:"og:type",content:"website"}],link:[{rel:"canonical",href:"https://example.com/"}]})),(o,t)=>{const $=L("router-link");return l(),i("section",ue,[e("div",me,[t[0]||(t[0]=e("div",null,null,-1)),c.value?(l(),A($,{key:0,to:"/editor",class:"inline-flex items-center gap-2 rounded-full bg-brand px-4 py-2 text-sm font-medium text-white hover:bg-brand-dark"},{default:T(()=>[j(r(g(a)("home.newPost")),1)]),_:1})):E("",!0)]),S(X,{categories:g(u).categories,tags:g(u).tags,onChange:w},null,8,["categories","tags"]),C.value.length?(l(),i("div",pe,[(l(!0),i(b,null,y(C.value,x=>(l(),A(ie,{key:x.id,post:x},null,8,["post"]))),128))])):(l(),i("p",ge,r(g(a)("home.empty")),1)),S(de,{onIntersect:f})])}}};export{_e as default};
