import{p as q,u as S,r as b,q as C,w as P,a as v,o as _,d as e,t as o,e as t,b as u,v as i,D as f,f as j,l as E}from"./index-D9tgDiJn.js";const N={class:"mx-auto max-w-3xl space-y-6"},R={class:"space-y-3"},z={class:"text-2xl font-bold"},D={class:"text-sm text-slate-500"},A={key:0,class:"grid gap-6 md:grid-cols-2"},B={class:"text-lg font-semibold"},M=["placeholder"],J=["placeholder"],L={class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},T={class:"text-lg font-semibold"},F=["placeholder"],I=["placeholder"],O=["placeholder"],G={class:"w-full rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},H={key:1,class:"space-y-6"},K={class:"rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900"},Q={class:"flex items-center gap-4"},W=["src"],X={class:"text-xl font-semibold"},Y={class:"text-sm text-slate-500"},Z={class:"text-lg font-semibold"},$={class:"grid gap-4 md:grid-cols-2"},ee=["placeholder"],te=["placeholder"],se=["placeholder"],ae={value:"zh-CN"},re={value:"en-US"},le={value:"ja-JP"},oe=["placeholder"],de={class:"flex flex-col gap-2 text-sm"},ne={class:"rounded bg-brand px-4 py-2 text-sm font-semibold text-white hover:bg-brand-dark"},ue="https://avatars.githubusercontent.com/u/000?v=4",ce={__name:"UserCenterView",setup(ie){const n=q(),{t:s}=S(),g=b(""),p=b(""),h=b(""),c=b(""),m=b(""),l=C({name:"",bio:"",headline:"",location:"",language:"zh-CN",avatar:""});P(()=>n.user,d=>{d&&(Object.assign(l,d),l.language==="en"&&(l.language="en-US"),l.language==="ja"&&(l.language="ja-JP"),l.language||(l.language="zh-CN"))},{immediate:!0});const k=async()=>{if(!p.value){window.alert(s("user.alerts.passwordRequired"));return}try{await n.login({email:g.value,password:p.value}),g.value="",p.value=""}catch(d){window.alert((d==null?void 0:d.message)??s("user.alerts.loginError"))}},y=async()=>{if(!c.value){window.alert(s("user.alerts.passwordRequired"));return}try{await n.register({email:h.value,name:m.value,password:c.value}),m.value="",h.value="",c.value=""}catch(d){window.alert((d==null?void 0:d.message)??s("user.alerts.registerError"))}},U=()=>{n.updateProfile(l),window.alert(s("user.alerts.profileUpdated"))},V=async d=>{var w;const a=d.target,r=(w=a==null?void 0:a.files)==null?void 0:w[0];if(!r)return;const x=new FileReader;x.onload=()=>{l.avatar=x.result},x.readAsDataURL(r)};return(d,a)=>(_(),v("section",N,[e("header",R,[e("h1",z,o(t(s)("user.title")),1),e("p",D,o(t(s)("user.description")),1)]),t(n).user?(_(),v("div",H,[e("div",K,[e("header",Q,[e("img",{src:t(n).user.avatar||ue,alt:"",class:"h-16 w-16 rounded-full object-cover"},null,8,W),e("div",null,[e("h2",X,o(t(n).user.name),1),e("p",Y,o(t(n).user.headline||t(s)("user.placeholders.intro")),1)])]),e("button",{class:"mt-4 rounded border border-slate-200 px-3 py-2 text-sm hover:border-brand dark:border-slate-700",onClick:a[5]||(a[5]=(...r)=>t(n).logout&&t(n).logout(...r))},o(t(s)("user.logout")),1)]),e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:f(U,["prevent"])},[e("h3",Z,o(t(s)("user.profileEdit")),1),e("div",$,[u(e("input",{"onUpdate:modelValue":a[6]||(a[6]=r=>l.name=r),type:"text",placeholder:t(s)("user.placeholders.name"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,ee),[[i,l.name]]),u(e("input",{"onUpdate:modelValue":a[7]||(a[7]=r=>l.headline=r),type:"text",placeholder:t(s)("user.placeholders.headline"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,te),[[i,l.headline]]),u(e("input",{"onUpdate:modelValue":a[8]||(a[8]=r=>l.location=r),type:"text",placeholder:t(s)("user.placeholders.location"),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,se),[[i,l.location]]),u(e("select",{"onUpdate:modelValue":a[9]||(a[9]=r=>l.language=r),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[e("option",ae,o(t(s)("language.zh")),1),e("option",re,o(t(s)("language.en")),1),e("option",le,o(t(s)("language.ja")),1)],512),[[j,l.language]])]),u(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=r=>l.bio=r),rows:"4",placeholder:t(s)("user.placeholders.bio"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,oe),[[i,l.bio]]),e("label",de,[E(o(t(s)("user.placeholders.avatar"))+" ",1),e("input",{type:"file",accept:"image/*",onChange:V},null,32)]),e("button",ne,o(t(s)("user.buttons.updateProfile")),1)],32)])):(_(),v("div",A,[e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:f(k,["prevent"])},[e("h2",B,o(t(s)("user.login")),1),u(e("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>g.value=r),type:"email",required:"",placeholder:t(s)("user.placeholders.email"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,M),[[i,g.value]]),u(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>p.value=r),type:"password",required:"",placeholder:t(s)("user.placeholders.password"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,J),[[i,p.value]]),e("button",L,o(t(s)("user.buttons.login")),1)],32),e("form",{class:"space-y-4 rounded-lg border border-slate-200 bg-white p-4 dark:border-slate-800 dark:bg-slate-900",onSubmit:f(y,["prevent"])},[e("h2",T,o(t(s)("user.register")),1),u(e("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>m.value=r),type:"text",required:"",placeholder:t(s)("user.placeholders.name"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,F),[[i,m.value]]),u(e("input",{"onUpdate:modelValue":a[3]||(a[3]=r=>h.value=r),type:"email",required:"",placeholder:t(s)("user.placeholders.email"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,I),[[i,h.value]]),u(e("input",{"onUpdate:modelValue":a[4]||(a[4]=r=>c.value=r),type:"password",required:"",placeholder:t(s)("user.placeholders.password"),class:"w-full rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},null,8,O),[[i,c.value]]),e("button",G,o(t(s)("user.buttons.register")),1)],32)]))]))}};export{ce as default};
