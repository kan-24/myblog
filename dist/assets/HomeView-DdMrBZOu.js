import{u as j}from"./posts-Df1r2n3E.js";import{u as H}from"./comments-BqzYk5VS.js";import{d as _,r as h,w as T,c as v,a as u,o as i,b as y,v as Y,e as t,f as B,F as k,g as w,t as p,h as N,i as F,j as P,k as b,l as z,m as I,n as L,p as A,q as C,s as U,u as X,x as E,y as O,z as M,A as R,B as V}from"./index-CuV8GAmF.js";const q={class:"grid gap-3 md:grid-cols-[1fr_auto_auto]"},G=["value"],J=["value"],K=_({__name:"ArticleFilters",props:{categories:{},tags:{}},emits:["change"],setup(f,{emit:o}){const c=f,s=o,n=h(""),a=h(""),d=h("");T([n,a,d],()=>{s("change",{search:n.value,category:a.value,tag:d.value})});const m=v(()=>c.categories),l=v(()=>c.tags);return(x,r)=>(i(),u("div",q,[y(t("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>n.value=e),type:"search",placeholder:"æœç´¢æ–‡ç« ...",class:"w-full rounded border border-slate-200 px-3 py-2 text-sm focus:border-brand focus:outline-none dark:border-slate-700 dark:bg-slate-800"},null,512),[[Y,n.value]]),y(t("select",{"onUpdate:modelValue":r[1]||(r[1]=e=>a.value=e),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[r[3]||(r[3]=t("option",{value:""},"å…¨éƒ¨åˆ†ç±»",-1)),(i(!0),u(k,null,w(m.value,e=>(i(),u("option",{key:e,value:e},p(e),9,G))),128))],512),[[B,a.value]]),y(t("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>d.value=e),class:"rounded border border-slate-200 px-3 py-2 text-sm dark:border-slate-700 dark:bg-slate-800"},[r[4]||(r[4]=t("option",{value:""},"å…¨éƒ¨æ ‡ç­¾",-1)),(i(!0),u(k,null,w(l.value,e=>(i(),u("option",{key:e,value:e},"#"+p(e),9,J))),128))],512),[[B,d.value]])]))}}),Q={class:"group flex flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white/65 shadow transition hover:shadow-lg dark:border-slate-800 dark:bg-slate-900/65"},W={class:"relative aspect-[16/9] overflow-hidden"},Z={alt:"",class:"h-full w-full object-cover transition group-hover:scale-105"},ee={class:"flex flex-1 flex-col space-y-3 p-4"},te={class:"flex items-center gap-2 text-xs uppercase tracking-wide text-brand"},se={class:"line-clamp-3 text-sm text-slate-600 dark:text-slate-300"},oe={class:"mt-auto flex flex-wrap items-center justify-between text-xs text-slate-500"},ae={class:"flex items-center gap-2"},le={class:"flex flex-wrap gap-1"},re=_({__name:"ArticleCard",props:{post:{}},setup(f){const o=f,c=v(()=>N(o.post.publishedAt).format("YYYY-MM-DD"));return(s,n)=>{const a=F("router-link"),d=P("lazy");return i(),u("article",Q,[t("div",W,[y(t("img",Z,null,512),[[d,s.post.cover]])]),t("div",ee,[t("div",te,[t("span",null,p(s.post.category),1),n[0]||(n[0]=t("span",null,"â€¢",-1)),t("time",null,p(c.value),1)]),b(a,{to:`/posts/${s.post.id}`,class:"text-lg font-semibold leading-snug"},{default:z(()=>[I(p(s.post.title),1)]),_:1},8,["to"]),t("p",se,p(s.post.summary),1),t("div",oe,[t("div",ae,[t("span",null,"ğŸ‘ï¸ "+p(s.post.views),1),t("span",null,"â¤ï¸ "+p(s.post.likes),1),t("span",null,"â­ "+p(s.post.favorites),1)]),t("div",le,[(i(!0),u(k,null,w(s.post.tags,m=>(i(),u("span",{key:m,class:"rounded-full bg-slate-100 px-2 py-1 dark:bg-slate-800"}," #"+p(m),1))),128))])])])])}}}),ne=_({__name:"VirtualList",props:{items:{},itemSize:{},height:{},keyField:{}},setup(f){const o=f,c=h(null),s=h(0),n=v(()=>Math.ceil(o.height/o.itemSize)+1),a=v(()=>o.items.length*o.itemSize),d=v(()=>{const l=Math.floor(s.value/o.itemSize),x=Math.min(l+n.value,o.items.length);return o.items.slice(l,x).map((r,e)=>({key:o.keyField?r[o.keyField]:l+e,offset:(l+e)*o.itemSize,data:r}))}),m=()=>{var l;s.value=((l=c.value)==null?void 0:l.scrollTop)??0};return T(()=>o.items.length,()=>{c.value&&(c.value.scrollTop=0,s.value=0)}),L(()=>{var l;(l=c.value)==null||l.addEventListener("scroll",m,{passive:!0})}),A(()=>{var l;(l=c.value)==null||l.removeEventListener("scroll",m)}),(l,x)=>(i(),u("div",{ref_key:"containerRef",ref:c,class:"relative w-full overflow-y-auto",style:C({height:`${l.height}px`})},[t("div",{class:"relative w-full",style:C({height:`${a.value}px`})},[(i(!0),u(k,null,w(d.value,r=>(i(),u("div",{key:r.key,class:"absolute left-0 right-0",style:C({transform:`translateY(${r.offset}px)`})},[U(l.$slots,"default",{item:r.data})],4))),128))],4)],4))}}),ie=_({__name:"IntersectionObserver",emits:["intersect"],setup(f,{emit:o}){const c=o,s=h(null);let n=null;return L(()=>{s.value&&(n=new IntersectionObserver(([a])=>{a.isIntersecting&&c("intersect")}),n.observe(s.value))}),A(()=>{n&&s.value&&n.unobserve(s.value)}),(a,d)=>(i(),u("div",{ref_key:"target",ref:s,class:"h-1 w-full"},null,512))}}),ce={class:"mx-auto flex max-w-6xl flex-col gap-6"},ue={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},de={key:1,class:"py-16 text-center text-slate-500"},pe=10,me=260,ge=900,xe=_({__name:"HomeView",setup(f){const o=j(),c=H(),s=X(),n=v(()=>{var e;return((e=s.user)==null?void 0:e.role)==="admin"}),a=E({search:"",category:"",tag:""}),d=h(1),m=()=>{d.value+=1},l=e=>{a.search=e.search,a.category=e.category,a.tag=e.tag,d.value=1},x=v(()=>{const e=a.search.toLowerCase();return o.posts.filter(g=>{const S=!a.search||g.title.toLowerCase().includes(e)||g.summary.toLowerCase().includes(e),$=!a.category||g.category===a.category,D=!a.tag||g.tags.includes(a.tag);return S&&$&&D})}),r=v(()=>x.value.slice(0,d.value*pe));return L(async()=>{await Promise.all([o.ensureLoaded(),c.ensureLoaded()])}),O({title:"BlogX | ç°ä»£èŒä¸šåšå®¢",meta:[{name:"description",content:"BlogX â€”â€” å±•ç¤ºä½œå“ã€åˆ†äº«æ´å¯Ÿã€è¿æ¥æœºä¼šçš„ç°ä»£ä¸ªäººåšå®¢ã€‚"},{property:"og:title",content:"BlogX"},{property:"og:description",content:"ç°ä»£ä¼˜é›…çš„èŒä¸šåšå®¢æ¨¡ç‰ˆï¼ŒåŠ©åŠ›è·³æ§½ä¸èŒä¸šå±•ç¤ºã€‚"},{property:"og:type",content:"website"}],link:[{rel:"canonical",href:"https://example.com/"}]}),(e,g)=>{const S=F("router-link");return i(),u("section",ce,[t("div",ue,[g[1]||(g[1]=t("div",null,[t("h1",{class:"text-2xl font-bold"},"BlogX èŒä¸šåšå®¢"),t("p",{class:"text-sm text-slate-500 dark:text-slate-400"},"å±•ç¤ºä½ çš„ä¸“ä¸šå½¢è±¡ï¼Œä¸æ‹›è˜æ–¹å»ºç«‹è¿æ¥ã€‚")],-1)),n.value?(i(),M(S,{key:0,to:"/editor",class:"inline-flex items-center gap-2 rounded-full bg-brand px-4 py-2 text-sm font-medium text-white hover:bg-brand-dark"},{default:z(()=>[...g[0]||(g[0]=[I(" âœï¸ æ–°å»ºæ–‡ç«  ",-1)])]),_:1})):R("",!0)]),b(K,{categories:V(o).categories,tags:V(o).tags,onChange:l},null,8,["categories","tags"]),r.value.length?(i(),M(ne,{key:0,items:r.value,"item-size":me,height:ge,"key-field":"id",class:"rounded-2xl border border-transparent bg-transparent"},{default:z(({item:$})=>[b(re,{post:$,class:"mb-4"},null,8,["post"])]),_:1},8,["items"])):(i(),u("p",de,"æš‚æ— åŒ¹é…çš„æ–‡ç« ã€‚")),b(ie,{onIntersect:m})])}}});export{xe as default};
