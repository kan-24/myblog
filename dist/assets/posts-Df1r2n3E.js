import{L as a,M as o,O as i,Q as r}from"./index-CuV8GAmF.js";const p=a("posts",{state:()=>({posts:o("posts",[]),loaded:!1,favorites:o("favorites",{}),likes:o("likes",{})}),getters:{categories(s){return[...new Set(s.posts.map(t=>t.category))]},tags(s){return[...new Set(s.posts.flatMap(t=>t.tags))]}},actions:{async ensureLoaded(){this.loaded||(this.posts.length||(this.posts=await r(),i("posts",this.posts)),this.loaded=!0)},async create(s){this.posts.unshift(s),i("posts",this.posts)},async update(s,t){this.posts=this.posts.map(e=>e.id===s?{...e,...t,updatedAt:new Date().toISOString()}:e),i("posts",this.posts)},async remove(s){this.posts=this.posts.filter(t=>t.id!==s),i("posts",this.posts)},toggleFavorite(s){this.favorites[s]=!this.favorites[s],i("favorites",this.favorites);const t=this.posts.find(e=>e.id===s);t&&(t.favorites+=this.favorites[s]?1:-1)},toggleLike(s){this.likes[s]=!this.likes[s],i("likes",this.likes);const t=this.posts.find(e=>e.id===s);t&&(t.likes+=this.likes[s]?1:-1)}}});export{p as u};
